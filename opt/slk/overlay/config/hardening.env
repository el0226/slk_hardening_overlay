# Source this file to enable "mostly compatible" hardening for Slackware SlackBuilds.
#
# Phase 1: stack protector + fortify + basic format hardening + full RELRO + noexecstack
#
# You can override any of these in your environment before sourcing this file.
: "${HARDEN_CFLAGS:=-fstack-protector-strong -D_FORTIFY_SOURCE=2 -Wformat -Wformat-security}"
: "${HARDEN_LDFLAGS:=-Wl,-z,relro -Wl,-z,now -Wl,-z,noexecstack}"

export HARDEN_CFLAGS HARDEN_LDFLAGS

# Apply linker hardening globally; SlackBuilds that explicitly set LDFLAGS may still override it
# unless patched by the injector.
export LDFLAGS="${LDFLAGS:-} ${HARDEN_LDFLAGS}"
